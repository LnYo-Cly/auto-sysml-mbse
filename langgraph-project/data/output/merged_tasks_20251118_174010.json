{
  "timestamp": "20251118_174010",
  "total_tasks": 7,
  "tasks": [
    {
      "index": 1,
      "type": "Requirement",
      "content": "REQ-FUN-001: 自主飞行控制 - 系统应能接收并解析来自地面控制站（GCS）的飞行计划（包含一系列WGS-84坐标系下的GPS坐标和高度指令）。飞行控制器（FCU）应采用自适应PID控制算法，结合来自IMU（MPU-9250，采样率1kHz）和GPS模块（u-blox NEO-M8N，定位精度2.5m CEP）的实时数据，通过四元数姿态表示法动态调整四个电机的转速。航迹跟踪精度要求：水平误差≤1.0m（2σ），垂直误差≤0.5m（2σ）。控制频率不低于400Hz。验证方法：硬件在环测试（HIL）、实飞验证、航迹分析。优先级：High\n\n---\n\nREQ-FUN-002: 多光谱数据采集与存储 - 系统应在飞行过程中，根据预设的触发条件（到达特定航点±3m范围内或固定时间间隔2-5s可调），控制多光谱相机（MicaSense RedEdge-MX，5个波段：蓝475nm、绿560nm、红668nm、红边717nm、近红外842nm）进行拍照。空间分辨率要求：在120m飞行高度下达到8cm/像素。采集到的图像数据（每张约12MB，格式为16位GeoTIFF+XML元数据）应被UTC时间戳和DGPS位置（精度≤10cm）标记，并通过数传电台（传输速率115.2kbps）实时传输至地面站。同时，数据应存储在机载的64GB Class 10 UHS-I microSD卡中，存储容量需支持至少5000张原始图像。验证方法：功能测试、现场演示、数据完整性校验。优先级：High\n\n---\n\nREQ-FUN-003: 实时状态监控与遥测 - 系统应通过MAVLink 2.0协议，以10Hz±1Hz的频率向地面控制站发送遥测数据包。数据包内容必须包括：GPS位置（经纬度精度1e-7度，海拔精度0.1m）、姿态角（滚转、俯仰精度0.1°，偏航精度0.5°）、空速（量程0-30m/s，精度0.5m/s）、电池电压（量程0-25.2V，精度±0.1V）、电池剩余电量（精度±5%）、电机转速（量程0-20000RPM，精度±100RPM）和信号链路强度（量程-120至0dBm，精度±3dB）。数据丢包率应小于1%。验证方法：协议一致性测试、数据完整性验证、现场演示。优先级：High\n\n---\n\nREQ-FUN-004: 安全故障处理与自动返航 - 当检测到以下任一条件时，系统应自动触发失效保护模式并执行返航着陆（RTL）程序：1) 与地面站的RC控制信号丢失持续超过5.0±0.5秒；2) 电池电压低于预设的3.4V/单体（对于4S电池组，即总电压低于13.6V±0.2V）；3) GPS卫星数少于8颗持续30秒。RTL程序包括：爬升至预设安全高度（50±5m，可配置）、以5m/s速度飞向并降落在预设的家位置（Home Position，精度半径2m内）。着陆过程应包含3m高度悬停3秒的确认阶段。验证方法：故障注入测试、安全案例分析、现场演示。优先级：High\n\n---\n\nREQ-NFN-001: 飞行控制响应时间 - 从IMU传感器读取数据到计算并输出PWM信号至电调（ESC）的完整控制回路延迟必须小于8毫秒（P95值），最大延迟不超过10毫秒\n\n---\n\n`REQ-NFN-001`: **飞行控制响应时间** - 从IMU传感器读取数据到计算并输出PWM信号至电调（ESC）的完整控制回路延迟必须小于8毫秒（P95值），最大延迟不超过10毫秒。姿态控制带宽不低于20Hz，位置控制带宽不低于5Hz。验证方法：时序分析、示波器测量、频率响应测试。优先级：High\n\n---\n\n`REQ-NFN-002`: **系统可靠性** - 系统在单次30分钟的任务周期内，其关键功能（如飞行控制、通信、动力）的可靠性（可用性）应不低于99.95%。平均故障间隔时间（MTBF）应大于800小时，平均修复时间（MTTR）小于30分钟。系统应实现故障容错等级FTL-2（单点故障不导致系统失效）。验证方法：FMEA分析、可靠性预测、加速寿命测试。优先级：High\n\n---\n\n`REQ-NFN-003`: **环境适应性** - 系统应能在以下环境条件下正常运行：环境温度范围-15°C至50°C（操作温度），存储温度-30°C至60°C；最大抗风能力为12米/秒（6级风，阵风15m/s）；防护等级至少为IP54（防尘、防溅水）；相对湿度范围5%至95%无冷凝。电磁兼容性应符合FCC Part 15和CE EN 300328标准。验证方法：环境应力筛选、风洞测试、EMC测试。优先级：Medium\n\n---\n\n`REQ-NFN-004`: **续航与载重能力** - 在最大载重5.0±0.2公斤（包括相机、云台等有效载荷）的条件下，系统使用16000mAh 6S锂聚合物电池（标称电压22.2V），应能实现不少于30分钟的有效飞行时间（从起飞到着陆，保留15%的安全电量）。悬停功耗不超过800W，最大爬升功耗不超过1500W。单次任务覆盖面积应不小于100公顷（在120m飞行高度下）。验证方法：负载测试、续航测试、功耗分析。优先级：High\n\n---\n\nPowerManagementSystem: 符合IEC 62133电芯安全标准, 实现过压、欠压、过流硬件保护, 支持电池健康状态估算和循环次数统计\n\n---\n\nSensorFusionModule: 采用扩展卡尔曼滤波算法, 支持多传感器冗余, 为飞行控制器提供精确可靠的姿态、位置和速度信息\n\n---\n\nDataLinkModule: 采用双频段冗余设计, 支持AES-256加密, 支持数据加密和身份认证\n\n---\n\nDataLinkModule需求：以MAVLink 2.0协议与地面站通信（最大传输距离10km），通过RC接收机（FrSky R9MM，支持SBUS）接收来自遥控器的直接操控指令（更新率50Hz），实现链路质量监控和自动频段切换，支持数据加密和身份认证，提供通信延迟统计（平均延迟<100ms）\n\n---\n\nMissionPayload需求：根据飞控或地面站的指令控制相机进行拍照或录像（快门延迟<50ms），通过三轴云台（STorM32控制器）稳定相机（控制精度0.01°），预处理采集到的图像数据（辐射定标、镜头畸变校正），管理机载存储设备（支持热插拔），生成数据质量报告和采集日志，支持IEEE 1588精密时间协议",
      "content_length": 2665
    },
    {
      "index": 2,
      "type": "Block Definition and Internal Block",
      "content": "系统组件：飞行控制器（FCU）、IMU（MPU-9250）、GPS模块（u-blox NEO-M8N）、多光谱相机（MicaSense RedEdge-MX）、数传电台、地面控制站（GCS）、电机、电调（ESC）、电池（4S电池组）、64GB Class 10 UHS-I microSD卡\n\n---\n\n传感器规格：IMU采样率1kHz，GPS定位精度2.5m CEP，多光谱相机5个波段（蓝475nm、绿560nm、红668nm、红边717nm、近红外842nm），空间分辨率8cm/像素\n\n---\n\n`**FlightControllerUnit**` - 作为无人机的大脑，飞行控制器单元负责处理所有传感器数据，运行核心控制算法，并协调所有子系统的行为。采用ARM Cortex-M7微处理器（主频400MHz，带FPU）。核心职责：运行姿态解算算法（Mahony互补滤波，更新率500Hz）；执行位置保持和航点跟踪的L1非线性导引律和PID控制律；管理飞行状态机并执行失效保护协议；通过CAN 2.0B（1Mbps）与电调通信，通过UART（921600bps）与传感器和通信模块交互；实现传感器健康监控和数据有效性检查。\n\n---\n\n`**FlightControllerUnit**` 关键属性：`currentAttitude: Attitude [degrees] {-180..180,精度0.1°}`, `targetWaypoint: GPS_Coordinate {lat:double[-90..90],lon:double[-180..180],alt:float[-1000..10000]}`, `systemMode: SystemMode {BOOT, STANDBY, MANUAL, AUTO_MISSION, AUTO_LOITER, RTL, FAILSAFE}`, `controlFrequency: uint16_t [Hz] {100..1000}`\n\n---\n\n`**FlightControllerUnit**` 核心操作：`calculateControlOutput(imuData: IMU_Data, gpsData: GPS_Data): PWM_Signal {updateRate:400Hz}`, `executeFailsafeAction(failsafeTrigger: FailsafeType, severity: uint8_t): Status`, `updateStateMachine(event: SystemEvent, priority: uint8_t): void`, `validateSensorData(sensorType: SensorID, data: SensorData): bool`\n\n---\n\nFlightControlSystem: 核心属性 - currentAttitude: Attitude [degrees] {-180..180,精度0.1°}, targetWaypoint: GPS_Coordinate {lat:double[-90..90],lon:double[-180..180],alt:float[-1000..10000]}, systemMode: SystemMode {BOOT, STANDBY, MANUAL, AUTO_MISSION, AUTO_LOITER, RTL, FAILSAFE}, controlFrequency: uint16_t [Hz] {100..1000}; 核心操作 - calculateControlOutput(imuData: IMU_Data, gpsData: GPS_Data): PWM_Signal {updateRate:400Hz}, executeFailsafeAction(failsafeTrigger: FailsafeType, severity: uint8_t): Status, updateStateMachine(event: SystemEvent, priority: uint8_t): void, validateSensorData(sensorType: SensorID, data: SensorData): bool\n\n---\n\nPowerManagementSystem: 核心属性 - batteryVoltage: Real [V] {0..25.2,精度0.01V}, batteryCapacityRemaining: Real [%] {0..100,精度1%}, totalCurrentDraw: Real [A] {0..60,精度0.1A}, batteryTemperature: Real [°C] {-20..80,精度1°C}, cycleCount: uint16_t {0..1000}; 核心操作 - distributePower(load: PowerLoad, priority: uint8_t): Voltage, getBatteryHealth(): BatteryStatus {SOH:float,internalResistance:float}, shutdownPowerRail(rail: PowerRail, emergency: bool): void, estimateRemainingFlightTime(powerProfile: PowerProfile): float\n\n---\n\nSensorFusionModule: 核心属性 - fusedPosition: GPS_Coordinate {lat:double,lon:double,alt:float,精度:水平2.5m,垂直1.0m}, fusedVelocity: Velocity [m/s] {vx:float,vy:float,vz:float,精度0.1m/s}, fusedAttitude: Attitude [degrees] {roll:float,pitch:float,yaw:float,精度:滚转/俯仰0.5°,偏航1.0°}, fusionHealth: uint8_t {0..100}, sensorCovariance: Matrix3x3; 核心操作 - readIMUData(): IMU_Data {timestamp:uint32_t,accel:Vector3f,gyro:Vector3f}, readGPSData(): GPS_Data {fixType:uint8_t,satellites:uint8_t,hdop:float}, runFusionAlgorithm(): FusedNavData {updateRate:100Hz}, calibrateSensors(calibrationType: CalibMode): Status\n\n---\n\nPropulsionSystem: 核心属性 - motorSpeed: Integer [RPM] {0..20000,精度100RPM}, motorTemperature: Real [°C] {-40..120,精度2°C}, thrustOutput: Real [N] {0..150,精度1N}, escTelemetry: ESC_Data {voltage:float,current:float,temperature:float}; 核心操作 - setMotorSpeed(pwmSignal: PWM_Signal, motorID: uint8_t): void, getMotorTelemetry(): MotorTelemetry {updateRate:50Hz}, calibrateESCs(): Status, emergencyStop(motorID: uint8_t): void\n\n---\n\nDataLinkModule: 核心属性 - linkQuality: Real [dBm] {-120..0,精度1dBm}, dataRate: Real [kbps] {0..100,精度1kbps}, packetLoss; 核心职责 - 通过数传电台与地面站通信, 通过RC接收机接收遥控器指令, 实现链路质量监控和自动频段切换, 支持数据加密和身份认证\n\n---\n\nDataLinkModule组件：关键属性 - linkQuality: Real [dBm] {-120..0,精度1dBm}, dataRate: Real [kbps] {0..100,精度1kbps}, packetLoss: Real [%] {0..100,精度0.1%}, rssi: Real [dBm] {-120..0}, encryptionStatus: bool；核心操作 - transmitTelemetry(telemetryData: TelemetryPacket, priority: uint8_t): Status, receiveCommand(timeout: uint16_t): MAVLink_Message, checkRCSignal(): RC_Signal_Status {lost:bool,quality:uint8_t}, switchFrequency(band: FrequencyBand): Status\n\n---\n\nMissionPayload组件：关键属性 - cameraTriggerInterval: Real [s] {0.1..10.0,精度0.01s}, gimbalOrientation: Attitude [degrees] {-180..180,精度0.1°}, storageUsage: Real [GB] {0..64,精度0.1GB}, imageCount: uint32_t {0..10000}, payloadTemperature: Real [°C] {-10..60}；核心操作 - captureImage(triggerSource: TriggerType): ImageData {timestamp:uint64_t,gps:GPS_Coordinate}, stabilizeGimbal(attitudeRef: Attitude, mode: GimbalMode): void, transferDataToStorage(image: ImageData, compression: CompressType): Status, performRadiometricCalibration(): CalibrationData\n\n---\n\nUAV_System内部结构：组成部分 - fc1: FlightControllerUnit {redundancy:primary}, pms1: PowerManagementSystem {voltageMonitoring:true}, sfm1: SensorFusionModule {ekfEnabled:true}, ps1: PropulsionSystem {motorCount:4}, dlm1: DataLinkModule {frequencyBand:dual}, mp1: MissionPayload {cameraType:multispectral}\n\n---\n\nUAV_System连接关系：[sfm1.navDataPort] <SPI> [fc1.sensorInputPort] {dataRate:2Mbps,frame:SPI_Mode3}, [fc1.motorControlPort] --CAN 2.0B--> [ps1.escCommandPort] {bitrate:1Mbps,messageID:0x100}, [pms1.powerOut] --12AWG Power Cable--> [fc1.powerIn], [ps1.powerIn], [dlm1.powerIn], [mp1.powerIn] {voltage:22.2V,maxCurrent:45A}, [pms1.batteryTelemetryPort] <I2C> [fc1.telemetryInputPort] {address:0x36,updateRate:10Hz}, [dlm1.commandOutputPort] <UART> [fc1.commandInputPort] {baudrate:921600,parity:None}, [fc1.telemetryOutputPort] <UART> [dlm1.telemetryInputPort] {baudrate:921600,parity:None}, [fc1.payloadCommandPort] <UART> [mp1.controlPort] {baudrate:115200,parity:None}, [mp1.dataOutputPort] <USB 2.0> [dlm1.payloadDataInputPort] {speed:480Mbps,burstSize:16KB}\n\n---\n\nOUT: mission_status: MissionReport {success:bool,imagesCaptured:uint16_t}, collected_imagery: ImageDataSet {format:GeoTIFF,count:uint16_t}",
      "content_length": 5759
    },
    {
      "index": 3,
      "type": "Activity",
      "content": "自主飞行控制流程：接收飞行计划→解析GPS坐标和高度指令→IMU和GPS数据采集→自适应PID控制算法计算→四元数姿态计算→动态调整四个电机转速→航迹跟踪\n\n---\n\n多光谱数据采集流程：检测触发条件（到达航点±3m或时间间隔2-5s）→控制多光谱相机拍照→UTC时间戳和DGPS位置标记→实时传输至地面站→存储到机载microSD卡\n\n---\n\n实时状态监控流程：采集GPS位置、姿态角、空速、电池电压、电池电量、电机转速、信号强度→打包MAVLink 2.0协议数据→以10Hz频率发送至地面站\n\n---\n\n自主测绘任务执行流程：输入 - start_mission_command: MAVLink_Command {msgid:76,component:1}, mission_plan: FlightPlan {waypointCount:50..500,CRS:WGS84}；输出 - mission_status: MissionReport {success:bool,imagesCaptured:uint16_t}, collected_imagery: ImageDataSet {format:GeoTIFF,count:uint16_t}；步骤序列 - 验证指令与计划（检查飞行计划完整性和有效性，航点数量50-500，安全高度30-150m，总航程≤15km），解锁电机并起飞（发送MAV_CMD_COMPONENT_ARM_DISARM解锁指令，等待所有电机初始化完成，超时3s）\n\n---\n\n步骤序列: 1. 验证指令与计划: 飞行控制器接收并解析\"开始任务\"指令（MAV_CMD_MISSION_START），检查飞行计划的完整性和有效性（航点数量50-500，安全高度30-150m，总航程≤15km）。验证失败则发送NACK。2. 解锁电机并起飞: 飞控发送MAV_CMD_COMPONENT_ARM_DISARM解锁指令，等待所有电机初始化完成（超时3s）。控制无人机以1.5m/s垂直起飞至第一个航点的起始高度±2m。3. 导航至下一航点: 飞控根据传感器融合模块提供的实时位置，计算与目标航点的横向偏差和高度偏差，运行L1导航算法（收敛时间<10s）生成电机控制指令。巡航速度8m/s，最大Bank角30°。4. 检查航点到达条件: 当无人机进入以目标航点为中心、半径为5m的圆柱形空域（水平容差5m，垂直容差2m）并保持2秒时，判定为到达该航点。5. 触发数据采集: 在到达航点时，飞控通过任务载荷控制端口发送\"拍照\"指令（触发脉冲宽度20ms）。任务载荷模块执行拍照操作（曝光时间1/1000s），并为图像添加GPS坐标（精度≤10cm）和PTP时间戳（精度≤1ms）。6. 数据传输与存储: 采集到的图像数据通过数据链模块尝试实时下传（QoS：尽力而为），同时被写入机载存储（写入速度≥20MB/s）。每完成10张图像传输后发送传输确认。7. 循环执行: 重复步骤3至6，直至飞行计划中的所有航点都被访问完毕。支持动态跳过故障航点（连续3次无法到达）。8. 执行返航着陆: 飞控触发MAV_CMD_NAV_RETURN_TO_LAUNCH指令，无人机以5m/s速度爬升至RTL安全高度，飞向Home位置（精度半径2m内）并执行自动着陆序列（下降率1m/s，触地检测压力阈值1.5kg）。9. 任务结束报告: 着陆并上锁电机后，飞控生成任务报告（包括完成的航点数、采集的图像数、飞行时间、平均速度等），通过数据链发送至地面站，同时写入黑匣子（循环记录，容量4GB）",
      "content_length": 1506
    },
    {
      "index": 4,
      "type": "State Machine",
      "content": "安全故障处理状态转换：正常飞行→检测故障条件（信号丢失>5s/电池电压<13.6V/GPS卫星<8颗持续30s）→触发失效保护模式→执行RTL程序（爬升至50m安全高度→以5m/s速度飞向家位置→3m高度悬停3秒→降落）\n\n---\n\n`systemMode: SystemMode {BOOT, STANDBY, MANUAL, AUTO_MISSION, AUTO_LOITER, RTL, FAILSAFE}` - 定义了飞行控制器的系统状态模式，包括启动、待机、手动、自动任务、自动悬停、返航、失效保护等状态\n\n---\n\nFlightControlSystem的systemMode状态: BOOT, STANDBY, MANUAL, AUTO_MISSION, AUTO_LOITER, RTL, FAILSAFE; 包含updateStateMachine操作用于处理状态转换\n\n---\n\n上下文块: FlightControllerUnit; 行为模型概述: 飞行控制器的行为模型定义了无人机从物理上电到任务结束下电的完整生命周期。采用UML 2.5状态机规范，支持层次状态和正交区域。状态转换包含严格的优先级机制，FAILSAFE状态具有最高优先级。符合DO-178C状态机设计模式; 状态定义: INIT - 系统刚上电，正在进行硬件自检和软件初始化。完成所有外围设备枚举和参数加载。entry / initializeHardware(); loadParametersFromEEPROM(); startWatchdogTimer(1000ms); do / 运行内置测试（BIT），检查传感器（IMU, GPS, 磁力计）、通信链路、电机响应，完成传感器校准; exit / 关闭看门狗定时器；发布系统就绪事件; STANDBY - 系统初始化完成，电机未上锁，等待用户指令。持续监控系统健康状况。entry / 启动遥测数据流发送(10Hz)；开启RC信号监控; do / 持续监控遥控器信号和地面站指令；更新电池状态显示；检查GPS锁定状态; exit / 停止遥测流；保存系统配置; MANUAL - 无人机由操作员通过遥控器直接控制飞行。支持姿态模式和定高模式。entry / 解锁电机；切换到手动控制模式；启用RC死区处理(±5%); do / 将RC接收机的SBUS信号映射为姿态角(滚转±30°、俯仰±30°)或油门指令(0-100%)；运行姿态稳定PID; exit / 上锁电机；保存操纵杆校准数据; AUTO_MISSION - 无人机正在自动执行预定义的飞行计划（航点跟踪）。支持任务暂停和航点更新。entry / 载入飞行计划；启动航点跟踪控制器；重置任务统计计数器; do / 持续运行导航和控制算法，跟踪预定航线；监控航点到达条件；处理载荷触发事件; exit / 停止航点跟踪控制器；保存任务执行日志; RETURN_TO_LAUNCH - 系统正在执行自动返航并着陆程序。包含安全高度爬升和精确着陆序列。entry / 记录当前状态；中止任何进行中的任务；命令无人机爬升至RTL安全高度(50m); do / 导航至Home位置；在Home点上方执行着陆程序(下降率0.5-1.0m/s)；持续监控着陆区域安全性; exit / 上锁电机；发布着陆完成事件；切换至STANDBY状态; FAILSAFE - 系统检测到严重故障（如电量极低、通信完全丢失、传感器失效），正在执行最高优先级的保护动作。entry / 记录故障码(错误源、严重等级、时间戳)；中止当前任何任务；触发声光报警\n\n---\n\n**状态名称**: FAILSAFE\n**描述**: 系统检测到严重故障（如电量极低、通信完全丢失、传感器失效），正在执行最高优先级的保护动作。\nentry / 记录故障码(错误源、严重等级、时间戳)；中止当前任何任务；触发声光报警\ndo / 根据具体的故障类型执行预设的应对策略（低电量：立即RTL；传感器失效：悬停等待；严重故障：紧急着陆）\nexit / 仅在故障条件解除且收到外部复位指令后退出；需要授权密码确认\n\n---\n\n**状态名称**: LANDED\n**描述**: 无人机已成功着陆，电机已上锁，但系统仍未断电。保持基本监控功能。\nentry / 上锁电机；发送\"Landed\"状态消息；启动着陆后自检\ndo / 继续保持传感器数据和遥测发送(1Hz)；监控电池温度；等待用户指令\nexit / 停止着陆后自检；清除着陆状态标志\n\n---\n\n**转换 (Transitions)**:\n[INIT] --[BIT_Passed && GPS_3D_Fix] / reportStatus(\"Ready\")--> [STANDBY]\n[STANDBY] --[RC_Armed_Signal && GPS_Health_OK] / armMotors()--> [MANUAL]\n[STANDBY] --[GCS_Auto_Command && Mission_Valid] / loadMission()--> [AUTO_MISSION]\n[MANUAL] --[RC_Disarmed_Signal || Auto_Transition_Timeout] / disarmMotors()--> [STANDBY]\n[AUTO_MISSION] --[Mission_Complete || Waypoint_Error] / reportMissionComplete()--> [RETURN_TO_LAUNCH]\n[任何状态] --[Low_Battery_Alert[batteryVoltage < 13.6V] || Critical_Sensor_Failure] / triggerFailsafe(CRITICAL)--> [FAILSAFE]\n[任何状态(除FAILSAFE)] --[RC_Signal_Lost[time > 5.0s] || GCS_Link_Lost[time > 10.0s]] / triggerFailsafe(LINK_LOST)--> [RETURN_TO_LAUNCH]\n[RETURN_TO_LAUNCH] --[Vehicle_Landed[weightOnWheels > 1.0kg] && Motors_Stopped] / disarmMotors()--> [LANDED]\n[LANDED] --[GCS_Disarm_Command || Auto_Shutdown_Timeout[300s]] / saveLogs()--> [STANDBY]\n\n---\n\n用GPS；如果IMU故障，进入悬停模式等待指令",
      "content_length": 2828
    },
    {
      "index": 5,
      "type": "Parameter",
      "content": "性能参数：续航时间30分钟，最大载重5公斤，控制频率400Hz，航迹跟踪精度水平误差≤1.0m，垂直误差≤0.5m，控制回路延迟<8ms，数据丢包率<1%，传输速率115.2kbps\n\n---\n\n电气参数：电池电压范围0-25.2V，精度±0.1V；电池剩余电量精度±5%；电机转速范围0-20000RPM，精度±100RPM；信号链路强度范围-120至0dBm，精度±3dB\n\n---\n\n位置精度参数：GPS定位精度2.5m CEP，DGPS位置精度≤10cm，经纬度精度1e-7度，海拔精度0.1m，姿态角精度滚转/俯仰0.1°，偏航0.5°，空速精度0.5m/s\n\n---\n\n控制回路延迟参数：小于8毫秒（P95值），最大延迟不超过10毫秒。姿态控制带宽不低于20Hz，位置控制带宽不低于5Hz\n\n---\n\n可靠性参数：单次30分钟任务周期内关键功能可靠性不低于99.95%，MTBF大于800小时，MTTR小于30分钟\n\n---\n\n环境参数：操作温度-15°C至50°C，存储温度-30°C至60°C，最大抗风能力12米/秒，防护等级IP54，相对湿度5%至95%无冷凝\n\n---\n\n性能参数：最大载重5.0±0.2公斤，有效飞行时间不少于30分钟，悬停功耗不超过800W，最大爬升功耗不超过1500W，单次任务覆盖面积不小于100公顷\n\n---\n\nPowerManagementSystem参数: 电源分配板效率>95%, 电池容量估算精度±3%, 过压保护>25.5V, 欠压保护<19V, 过流保护>45A\n\n---\n\nSensorFusionModule参数: IMU加速度计量程±16g, 陀螺仪量程±2000dps, 采样率1kHz; GPS更新率10Hz; 气压计精度0.1mbar; 磁力计精度0.1μT; EKF2状态向量15维, 更新率100Hz; 位置精度水平2.5m垂直1.0m, 速度精度0.1m/s, 姿态精度滚转/俯仰0.5°偏航1.0°\n\n---\n\nPropulsionSystem参数: 控制信号更新率400Hz, 电机转速范围0-20000RPM精度±50RPM, 温度范围-40-120°C精度2°C, 推力输出0-150N精度1N\n\n---\n\nDataLinkModule参数: 传输距离最大10km, RC指令更新率50Hz, 通信延迟平均<100ms\n\n---\n\n通信参数：SPI@10MHz用于IMU，I2C@400kHz用于其他传感器，CAN 2.0B@1Mbps向推进系统发送控制指令，UART@921600bps与数据链和任务载荷通信，USB 2.0@480Mbps传输图像数据\n\n---\n\n航点数量50-500，安全高度30-150m，总航程≤15km; 超时3s; 起飞速度1.5m/s; 巡航速度8m/s，最大Bank角30°; 航点到达条件: 半径5m的圆柱形空域（水平容差5m，垂直容差2m）并保持2秒; 触发脉冲宽度20ms; 曝光时间1/1000s; GPS坐标精度≤10cm; PTP时间戳精度≤1ms; 写入速度≥20MB/s; 连续3次无法到达故障航点; 返航速度5m/s; Home位置精度半径2m内; 下降率1m/s; 触地检测压力阈值1.5kg; 黑匣子容量4GB; 遥测数据流发送频率10Hz; RC死区处理±5%; 姿态角滚转±30°、俯仰±30°; 油门指令0-100%; RTL安全高度50m; 着陆下降率0.5-1.0m/s\n\n---\n\n**约束块**: FlightTimeEstimation\n**物理意义与应用**: 此约束用于在任务规划阶段估算无人机的最大飞行时间。基于电池化学特性、环境温度和飞行剖面进行精确计算，是评估任务可行性和规划航线长度的关键依据。符合Peukert定律和电池老化模型。\n**参数 (Parameters)**: TotalBatteryCapacity: Real [mAh] {标称值:16000,实际值:15200-16500}, AveragePowerConsumption: Real [W\n\n---\n\n约束块: FlightTimeEstimation; 参数: TotalBatteryCapacity: Real [mAh] {标称值:16000,实际值:15200-16500}, AveragePowerConsumption: Real [W] {悬停:650-750,巡航:550-650}, BatteryVoltage: Real [V] {标称:22.2,工作范围:19.0-25.2}, EstimatedFlightTime: Real [minutes] {计算值:25-35}, BatteryAgeFactor: Real {0.8-1.0}, TemperatureFactor: Real {0.9-1.1}; 约束公式: TotalUsableEnergy [Wh] = (TotalBatteryCapacity [mAh] * BatteryVoltage [V] * BatteryAgeFactor) / 1000 * 0.85, EstimatedFlightTime [minutes] = (TotalUsableEnergy [Wh] / (AveragePowerConsumption [W] * TemperatureFactor)) * 60\n\n---\n\n约束块: MaximumLiftConstraint; 参数: TotalThrust: Real [N] {单电机:40-50,总量:160-200}, UAV_Mass: Real [kg] {净重:3.5,最大起飞重量:8.5}, Payload_Mass: Real [kg] {设计值:5.0,实际:4.5-5.2}, Gravity: Real [m/s^2] = 9.80665, AirDensity: Real [kg/m^3] {海平面:1.225,1000m:1.112}, ThrustMargin: Real [%] {安全裕度:15-20}; 约束公式: TotalThrust >= (UAV_Mass + Payload_Mass) * Gravity * (1 + ThrustMargin/100) / (AirDensity/1.225)\n\n---\n\n约束块: NavigationAccuracy; 参数: GPS_Position_Error: Real [m] {CEP:2.5}, IMU_Attitude_Error: Real [°] {RMS:0.5}, Control_Tracking_Error: Real [m] {RMS:1.0}, Total_Position_Uncertainty: Real [m] {95%置信区间:3.5}; 约束公式: Total_Position_Uncertainty = sqrt(GPS_Position_Error^2 + Control_Tracking_Error^2 + (IMU_Attitude_Error*π/180*FlightHeight)^2)",
      "content_length": 3011
    },
    {
      "index": 6,
      "type": "Sequence",
      "content": "地面控制站与无人机交互序列：GCS发送飞行计划→无人机接收解析→执行自主飞行→实时发送遥测数据（10Hz）→GCS监控状态→异常时发送控制指令→无人机执行安全协议\n\n---\n\n场景名称: 处理低电量紧急情况; 涉及的生命线: [PowerManagementSystem], [FlightControllerUnit], [DataLinkModule], [PropulsionSystem], [GroundControlStation]; 消息序列: 1. [PowerManagementSystem] -> [FlightControllerUnit]: BatteryAlert(LOW_VOLTAGE, voltage=13.5V, confidence=95%) {周期:100ms}, 2. [FlightControllerUnit] -> [FlightControllerUnit]: evaluateCondition()[priority:CRITICAL, timeout:100ms], 3. [FlightControllerUnit] -> [DataLinkModule]: sendTelemetry(STATUS_CRITICAL, \"Low Battery RTL Triggered\", battery_level=20%) {QoS:高优先级,重试次数:3}, 4. [GroundControlStation] -> [DataLinkModule]: ACK(STATUS_CRITICAL) {期望响应时间:<500ms}, 5. [FlightControllerUnit] -> [FlightControllerUnit]: transitionTo(RETURN_TO_LAUNCH)[abortCurrentTasks:true], 6. [FlightControllerUnit] -> [PropulsionSystem]: setMotorSpeed(Climb_PWM, climb_rate=3m/s, target_altitude=50m) {控制模式:位置控制}, 7. [FlightControllerUnit] -> [PropulsionSystem]: setMotorSpeed(Navigate_To_Home_PWM, cruise_speed=6m/s, bank_angle_limit=25°) {导航算法:L1}, 8. [FlightControllerUnit] -> [DataLinkModule]: sendTelemetry(POSITION_DATA, RTL_progress=65%, estimated_remaining_time=120s) {周期:2s}, 9. [FlightControllerUnit] -> [PropulsionSystem]: setMotorSpeed(Landing_Sequence_PWM, descent_rate=1m/s, flare_altitude=3m) {着陆模式:精确着陆}, 10. [PropulsionSystem] -> [FlightControllerUnit]: MotorTelemetry(rpm=0, temperature=45°C, status=STOPPED) {验证条件:所有电机转速<100RPM}, 11. [FlightControllerUnit] -> [DataLinkModule]: sendTelemetry(STATUS_OK, \"Landed Safely\", final_battery=18%) {QoS:确认传输}, 12. [FlightControllerUnit] -> [PowerManagementSystem]: PowerSaveMode(enable=true, keepalive_interval=30s)",
      "content_length": 1686
    },
    {
      "index": 7,
      "type": "Use Case",
      "content": "**用例名称**: 执行农田测绘任务\n**场景简述 (Narrative)**: 农业技术员李四需要对一块500亩的玉米地进行生长状况评估。他首先在办公室使用地面站软件（QGroundControl）规划好详细的飞行航线（航点数量150个，飞行高度120m，航向重叠率80%，旁向重叠率70%），并设置好多光谱相机的拍摄间隔（2秒）。到达田间后，他选择一块平坦安全的区域（30m×30m）作为起降场，进行GPS差分校正。启动无人机后，系统自动完成健康检查。无人机自主起飞，严格按照规划航线飞行（巡航速度8m/s），并在每个航点自动拍照。李四通过平板电脑上的地面站软件实时查看无人机位置、电池状态和图像采集进度。任务完成后，无人机自动返回并降落在起降点（着陆精度±1.5m）。李四回收无人机，通过USB 3.0接口导出数据（总数据量约45GB）用于后续分析。\n**参与者 (Actors)**: Primary: 农业技术员（角色：操作员）, Secondary: 地面控制站软件（QGroundControl v4.2）, Supporting: 气象站（提供实时风速数据）\n\n---\n\n**基本流程 (Happy Path)**:\n1. 技术员通过地面站上传飞行计划至无人机（传输时间<30s）。\n2. 技术员在安全环境下进行起飞前检查（GPS卫星数≥12，HDOP<1.0，电池电量>95%）后发出\"自动起飞\"指令。\n3. 无人机起飞（垂直上升率2m/s）并开始按航线飞行（航向精度<1.0m）。\n4. 无人机在每个航点自动触发相机拍照（成功率>99.5%），实时下传缩略图。\n5. 无人机完成所有航点后自动返航（剩余电量>25%）并着陆（着陆速度<0.5m/s）。\n6. 技术员确认任务完成，下载完整数据（传输速率50MB/s），生成作业报告。\n\n---\n\n**备选/异常流程**:\n**通信中断**: 如果在任务中与地面站的数传链路中断超过10秒，无人机将根据预设策略继续完成任务（如链路预期恢复时间<5分钟）或执行返航（如链路质量持续恶化）。\n**电量不足**: 如果在任务中途电池电量低于安全阈值（25%），无人机将立即中止任务，计算最优返航路径，并自动返航（考虑逆风因素）。\n**恶劣天气**: 技术员通过地面站监控到风速过大（>10m/s），手动发送指令中止任务，命令无人机立即返航（紧急下降率3m/s）。\n**传感器故障**: 如果主要GPS失效，系统切换至备用GPS；如果IMU故障，进入悬停模式等待指令。",
      "content_length": 1063
    }
  ]
}